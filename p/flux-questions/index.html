<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><link rel="alternate" type="application/rss+xml" title="Thomas Belin's Blog" href="https://blog.atomrc.dev/feed.xml"><link rel="icon" href="/favicon.ico"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><title>Quelques questions courantes avec Flux - Thomas Belin</title><meta name="description" content="Les quelques questions que je me suis posé en utilisant Flux"><meta name="author" content="Thomas Belin"><link rel="canonical" href="https://blog.atomrc.dev/p/flux-questions/"><meta property="og:title" content="Quelques questions courantes avec Flux - Thomas Belin"><meta property="og:description" content="Les quelques questions que je me suis posé en utilisant Flux"><meta property="og:url" content="https://blog.atomrc.dev/p/flux-questions/"><meta property="og:image" content="https://www.gravatar.com/avatar/56f2389bd912f388cc79874ce65fc0dc"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@atomrc"><meta name="twitter:title" content="Quelques questions courantes avec Flux - Thomas Belin"><meta name="twitter:description" content="Les quelques questions que je me suis posé en utilisant Flux"><meta name="twitter:image" content="https://www.gravatar.com/avatar/56f2389bd912f388cc79874ce65fc0dc"><meta name="color-scheme" content="dark light"><style>body{--ff-sans:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Ubuntu","Roboto","Noto Sans","Droid Sans",sans-serif;--ff-mono:ui-monospace,"Cascadia Mono","Segoe UI Mono","Ubuntu Mono","Roboto Mono",Menlo,Monaco,Consolas,monospace;padding:0;margin:0;color:var(--font-color);background-color:var(--bg-color);font-family:var(--ff-sans);font-size:13pt}body,body.light-mode{--font-color:#333;--font-secondary-color:#555;--bg-color:#fff;--title-color:#e7005d;--link-color:#0e4db5;--bg-code-color:#f6f6f6;--secondary-color:#eee}body.dark-mode{--font-color:#ddd;--font-secondary-color:#aaa;--bg-color:#1c1c21;--title-color:var(--link-color);--link-color:rgb(88, 166, 255);--bg-code-color:#444;--secondary-color:#333}#dark-mode-toggle{border:none;background-color:transparent;position:fixed;top:1em;right:1em;z-index:1;height:24px;width:24px;overflow:hidden}#dark-mode-toggle svg{stroke:var(--font-color);fill:var(--font-color);transition:opacity .3s,fill .3s,stroke .3s;position:absolute;top:0;left:0}.dark-mode #dark-mode-toggle .moon,.light-mode #dark-mode-toggle .sun{opacity:0}a{text-decoration:none;color:var(--link-color)}ul{list-style:none;padding:0}.avatar{height:100px;width:100px;border-radius:50px}.title{color:var(--title-color)}.tag{font-size:10pt;color:var(--font-secondary-color);font-style:italic}#header{text-align:center;font-size:1.95em;padding:1em}#header nav{text-align:center;margin-top:.6em;font-size:.5em}#header .title{color:var(--font-color);font-weight:200}footer{text-align:center;padding:2em}.love{color:red}footer a{color:inherit;text-decoration:underline}.list-container{max-width:50%;margin:auto;text-align:center}@media screen and (max-width:1000px){.list-container{max-width:75%}}@media screen and (max-width:650px){.list-container{max-width:80%}}.list-container__title{text-align:center}.list-container__list li{display:flex;padding-bottom:.5em}.list-container__list time{text-align:right;min-width:90px}.list-container__headline{max-width:500px}.list-container__content{display:inline-block;text-align:left}</style><script async defer="defer" data-domain="atomrc.dev" src="https://plausible.io/js/plausible.js"></script></head><body><button id="dark-mode-toggle" aria-label="Toggle bewteen dark and light mode"><svg xmlns="http://www.w3.org/2000/svg" class="sun" stroke-linejoin="round" stroke-linecap="round" stroke-width="2" stroke="#000" fill="none" height="24" width="24"><circle r="5" cy="12" cx="12"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72 1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="moon"><path style="stroke-width:.0469517" d="M13.278 24.02c3.707 0 7.093-1.687 9.336-4.451a.564.564 0 0 0-.543-.909c-5.831 1.111-11.186-3.36-11.186-9.247a9.41 9.41 0 0 1 4.765-8.188.564.564 0 0 0-.176-1.044 12.12 12.12 0 0 0-2.196-.2C6.643-.02 1.258 5.356 1.258 12c0 6.635 5.376 12.02 12.02 12.02z"/></svg></button><script>(function (win, doc) {
  let isDarkMode =
    sessionStorage.getItem("darkmode") === undefined
      ? win.matchMedia("(prefers-color-scheme: dark)").matches
      : sessionStorage.getItem("darkmode") === "true";

  const toggleDarkMode = (setDarkMode) => {
    isDarkMode = setDarkMode ?? !isDarkMode;
    sessionStorage.setItem("darkmode", isDarkMode);
    if (isDarkMode) {
      document.body.classList.add("dark-mode");
      document.body.classList.remove("light-mode");
    } else {
      document.body.classList.remove("dark-mode");
      document.body.classList.add("light-mode");
    }
  };

  toggleDarkMode(isDarkMode);
  const darkModeToggle = doc.getElementById("dark-mode-toggle");

  darkModeToggle.addEventListener("click", () => toggleDarkMode());
})(window, document);</script><section id="header"><div><a href="/"><img class="avatar" src="https://www.gravatar.com/avatar/56f2389bd912f388cc79874ce65fc0dc?s=200" alt="Avatar"></a><br><a class="title" href="/"><span rel="author">Thomas Belin</span></a><br></div><nav><a href="/about/">About Me</a></nav></section><section><link href="/css/article.css" rel="stylesheet" async defer="defer"><link href="/css/syntax.css" rel="stylesheet" async defer="defer"><style>article{max-width:800px;margin:auto;padding:0 1em;position:relative;line-height:1.5em}article h1{font-size:2em;font-weight:300;line-height:1.2em}article h2,article h3{position:relative;padding-bottom:.3em;font-weight:500;line-height:1.2em}article h2{font-size:2em;border-bottom:solid 1px var(--secondary-color);margin:1em 0 .5em}article h3{font-size:1.5em;margin:1em 1em}article ul{list-style-type:disc;padding:0 2em}article picture{border:solid 1px grey;display:block;max-width:100%;margin:auto}picture img,video{width:100%;height:auto}</style><article lang="fr"><header><h1 class="title">Quelques questions courantes avec Flux</h1><aside><time class="folded-paper" datetime="2015-11-08T00:00:00.000Z" pubdate itemprop="datePublished" content="2015-11-08T00:00:00.000Z">08 <span class="month">Nov</span> 2015</time><br><span class="tag">posts</span>&nbsp; <span class="tag">ReactJS</span>&nbsp; <span class="tag">Flux</span>&nbsp;</aside></header><div class="article-body"><p>Lors de ma découverte de Flux, je me suis posé un certain nombre de questions. Je voudrais vous les exposer ici, pas simplement parce que vous risquez de vous les poser mais surtout parce que les réponses mettent en valeur les principes de Flux.</p><h2 id="o%C3%B9-faire-mes-requ%C3%AAtes-ajax-%3F" tabindex="-1">Où faire mes requêtes AJAX ?</h2><p>Réponse courte : dans les créateurs d'actions.</p><p>Explication : On pourrait penser que les stores sont responsables des requêtes AJAX, seulement la doc de Flux nous dit que les stores doivent être synchrones. Donc à partir de là on devrait accepter que l'AJAX ne se fait pas dans les stores, mais allons un peu plus loin pour en être complétement convaincu.</p><p>On va raisoner par l'absurde pour répondre à cette question. Flux nous dit que les stores représentent un état de l'application à l'instant <code>t</code>. Si on garde en tête qu'un changement d'état de votre application est en réalité une fonction qui prend en paramètres l'état <code>t</code> et une action. Admettons donc qu'une action déclenche une requête AJAX dans l'un de vos stores. Au moment du dispatch de l'action, les données du store sont dans un certain état et changent une fois la requête terminée. Or il n'y a pas eu de nouvelle action déclenchée au moment du retour de la requête donc votre application n'a pas changée d'état alors que les données de votre store si. Ce qui veut dire que à l'instant <code>t</code> de l'application votre store peut être dans deux états différents, ce qui est incohérent avec le postulat de base.</p><h2 id="comment-nommer-mes-actions-%3F" tabindex="-1">Comment nommer mes actions ?</h2><p>Réponse courte : il faut se poser la question « Que vient-il de se passer sur mon application ? »</p><p>Explication : Il faut voire les actions comme des éléments stupides. elles sont là pour informer de ce qu'il se passe et, en aucun cas, décider de ce qu'il faut faire quand quelque chose se produit. Il faut considérer qu'elles ne connaissent rien de l'application dans laquelle elles évoluent et n'ont aucune idée de ce qu'il va se passer quand elle vont émettre un évènement.</p><p>Les actions doivent donc pas ressembler à <code>SHOW_TODOS</code> mais plutôt <code>TODOS_RECEIVED</code>. De manière générale <strong>construire ses noms d'actions au passé</strong> aide ;)</p><h2 id="comment-choisir-entre-un-composant-statefull-ou-un-nouveau-store-%3F" tabindex="-1">Comment choisir entre un composant statefull ou un nouveau store ?</h2><p>La réponse par défaut est : faites un store. Selon mon opinion, le seul cas de figure ou un composant statefull est envisageable serait pour un composant très gérénique qui n'a aucune logique métier liée à votre application et que vous pouriez utiliser sur un projet qui n'a rien à voir.</p><p>Par exemple, si vous faites un date picker générique, à mon sens il est plutôt conseillé de faire un composant statefull. En revanche le composant métier qui utilisera votre date picker devra avoir son store.</p><p>Le point faible de cette réponse est qu'elle rentre en contradiction avec la réponse à la première question. A l'ouverture de votre date picker l'état change visuellement sans qu'il y ai eu changement d'état de l'application.<br>On peut répondre à ça que ça n'est pas un changement d'état de l'application puisque les objets métier n'ont pas changés. Au même titre qu'on ne stocke pas dans un store l'état du scroll du user ou encore la position de sa souris.</p><h2 id="%C3%A0-vous" tabindex="-1">À vous</h2><p>Bref voila les quelques questions qui m'ont fait réfléchir en me penchant sur Flux. J'espère qu'elles vous seront utiles et qu'elles vous permettrons de mieux penser en Flux.<br>N'hésitez pas à partager les questions qui vont ont fait cogiter et à rebondir sur les réponses que j'apporte ici.</p><p>A bon entendeur ;)</p></div><br><em>You enjoyed this article? Consider <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/tweet?url=https://blog.atomrc.dev/p/flux-questions/&text=Quelques questions courantes avec Flux&via=atomrc">tweeting it</a> :)</em></article><script src="/js/posts.js" async></script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https://blog.atomrc.dev#website",
      "url": "https://blog.atomrc.dev",
      "name": "Thomas Belin",
      "description": "Freelance Front-End Architect in Paris. I leave code cleaner than I found it. Seriously into Functional and Reactive Programming.",
      "inLanguage": "fr"
    },
    {
      "@type": "BlogPosting",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.atomrc.dev/p/flux-questions/"
      },
      "url": "https://blog.atomrc.dev/p/flux-questions/",
      "isPartOf": {
        "@id": "https://blog.atomrc.dev#website"
      },
      "headline": "Quelques questions courantes avec Flux",
      "description": "Les quelques questions que je me suis posé en utilisant Flux",
      "image": "https://www.gravatar.com/avatar/56f2389bd912f388cc79874ce65fc0dc?s=300",
      "inLanguage": "fr",
      "publisher": {
        "@type": "Organization",
        "name": "Thomas Belin",
        "url": "https://blog.atomrc.dev#organization",
        "logo": {
          "@type": "ImageObject",
          "url": "https://www.gravatar.com/avatar/56f2389bd912f388cc79874ce65fc0dc?s=300",
          "width": 300,
          "height": 300
        }
      },
      "author": {
        "@type": "Person",
        "name": "Thomas Belin"
      },
      "keywords": "posts,ReactJS,Flux",
      "datePublished": "2015-11-08T00:00:00.000Z"
    }
  ]
}</script></section><footer>Made with <span class="love">♥</span>️ by <a href="https://twitter.com/atomrc" rel="noopener noreferrer">@atomrc</a><br><a href="/feed.xml">RSS feed</a></footer></body></html>