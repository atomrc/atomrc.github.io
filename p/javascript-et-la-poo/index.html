<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><link rel="alternate" type="application/rss+xml" title="Thomas Belin's Blog" href="https://blog.atomrc.dev/feed.xml"><link rel="icon" href="/favicon.ico"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><title>La notion de classe en Javascript - Thomas Belin</title><meta name="description" content="JavaScript est un langage orient&eacute; objet mais ne dispose pas de classes. Comment donc faire de l&apos;objet sans classes ?"><meta name="robots" content="index,follow"><meta name="author" content="Thomas Belin"><link rel="canonical" href="https://blog.atomrc.dev/p/javascript-et-la-poo/"><meta property="og:title" content="La notion de classe en Javascript - Thomas Belin"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.atomrc.dev/p/javascript-et-la-poo/"><meta property="og:description" content="JavaScript est un langage orient&eacute; objet mais ne dispose pas de classes. Comment donc faire de l&apos;objet sans classes ?"><meta property="og:image" content="https://www.gravatar.com/avatar/56f2389bd912f388cc79874ce65fc0dc?s=300"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@atomrc"><meta name="twitter:url" content="https://blog.atomrc.dev/p/javascript-et-la-poo/"><meta name="twitter:title" content="La notion de classe en Javascript - Thomas Belin"><meta name="twitter:description" content="JavaScript est un langage orient&eacute; objet mais ne dispose pas de classes. Comment donc faire de l&apos;objet sans classes ?"><meta name="twitter:image" content="https://www.gravatar.com/avatar/56f2389bd912f388cc79874ce65fc0dc?s=300"><meta name="theme-color" content="#ffffff"><style>body{--ff-sans:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Ubuntu","Roboto","Noto Sans","Droid Sans",sans-serif;--ff-mono:ui-monospace,"Cascadia Mono","Segoe UI Mono","Ubuntu Mono","Roboto Mono",Menlo,Monaco,Consolas,monospace;padding:0;margin:0;color:#333;background-color:#fff;font-family:var(--ff-sans);font-size:13pt}a{text-decoration:none;color:#0e4db5}ul{list-style:none;padding:0}.avatar{height:100px;width:100px;border-radius:50px}.title{color:#e7005d}.tag{font-size:10pt;color:#555;font-style:italic}#header{text-align:center;font-size:1.95em;padding:1em}#header .title{text-shadow:1px 1px 0 #fff;color:inherit;font-weight:200}#footer{text-align:center;padding:2em}.love{color:red}#footer a{color:inherit;text-decoration:underline}</style><script async defer="defer" data-domain="atomrc.dev" src="https://plausible.io/js/plausible.js"></script></head><body><div id="header"><div><a href="/"><img class="avatar" src="https://www.gravatar.com/avatar/56f2389bd912f388cc79874ce65fc0dc?s=200" alt="Avatar"></a><br><a class="title" href="/"><span rel="author">Thomas Belin</span></a><br></div></div><section><link href="/css/article.css" rel="stylesheet" async defer="defer"><link href="/css/syntax.css" rel="stylesheet" async defer="defer"><style>article{max-width:800px;margin:auto;padding:0 1em;position:relative;line-height:1.5em}article h1{font-size:2em;font-weight:300}article h2,article h3{position:relative;padding-bottom:.3em;font-weight:500}article h2{font-size:2em;border-bottom:solid 1px #eee;margin:1em 0 .5em}article h3{font-size:1.5em;margin:1em 2em}article ul{list-style-type:disc;padding:0 2em}article img{border:solid 1px grey;display:block;max-width:90%;margin:auto}</style><article lang="fr"><header><h1 class="title">La notion de classe en Javascript</h1><aside><time class="folded-paper" datetime="Wed Jan 29 2014 00:00:00 GMT+0000 (Coordinated Universal Time)" pubdate itemprop="datePublished" content="Wed Jan 29 2014 00:00:00 GMT+0000 (Coordinated Universal Time)">29 <span class="month">Jan</span> 2014</time><br><span class="tag">posts</span>&nbsp; <span class="tag">javascript</span>&nbsp; <span class="tag">internals</span>&nbsp;</aside></header><div class="article-body"><p>La plupart des langages orientés objet dispose d'un mécanisme simple pour définir les propriétés et méthodes d'un objet : les classes. Seulement JavaScript ne propose pas cette solution pour faire de l'objet mais propose à la place les prototypes.</p><p>Avec JavaScript, il va falloir oublier la syntaxe à laquelle on est habitué avec des langages qui proposent des classes (PHP, C++, Java, Ruby ...) et qui groupent toute la définition d'une classe dans un seul bloc de code :</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token parameter">_prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">=</span> _prop<span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">method1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">method1</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">/*...*/</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">method2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">/*...*/</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">/* ... */</span><br><span class="token punctuation">}</span></code></pre><p>A la place il va falloir s'orienter vers une syntaxe où l'on définit un constructeur (une <code>Function</code>) d'une part et un prototype (un <code>Object</code>) d'autre part.</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//constructor</span><br><span class="token keyword">function</span> <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token parameter">_prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">=</span> _prop<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">//prototype</span><br><span class="token class-name">MyClass</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token function-variable function">method1</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br><br>    <span class="token function-variable function">method2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Maintenant que vous savez déclarer une classe en JavaScript, laissez moi vous expliquer pourquoi la première solution n'est pas bonne.</p><p>Le piège réside dans le fait que la première solution est parfaitement fonctionnelle. Le bout de code suivant fonctionnera sans aucun problème :</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>t<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>t<span class="token punctuation">.</span><span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>Difficile donc de se rendre compte de son erreur</strong>.</p><p>Seulement voila avec la première solution, à <strong>chaque fois que vous ferez un <code>new MyClass()</code>, le moteur JavaScript va jouer entièrement votre fonction <code>MyClass</code></strong>. Si votre classe <code>MyClass</code> grossit un peu et que vous en créez beaucoup d'instances, vous risquez d'encombrer quelque peu la mémoire allouée par votre application.</p><p>Par exemple si vous créez <code>n</code> instances de <code>MyClass</code> vous aurez également créé <code>n</code> fonctions <code>method1</code> et <code>n</code> fonctions <code>method2</code>. Pas vraiment optimal sachant que <strong>seul le bout de code '<code>this.prop = params;</code>' est spécifique aux instances de votre &quot;classe&quot;</strong>.</p><p>Le <code>prototype</code> est justement là pour vous fournir un espace commun à toutes les instances de votre <code>Function</code>. <strong>l'objet <code>prototype</code> ne sera créé qu'une et une seule fois pas le moteur JavaScript</strong>. Chaque instance de votre <code>Function</code> aura une référence vers cet objet.</p><p>Prudence tout de même car étant une référence vers un objet, si vous changez cet objet dans la suite du code, toutes les instances seront impactées par ce changement.</p><p>Par exemple :</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment">//constructor</span><br><span class="token keyword">function</span> <span class="token function">Class</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><br><span class="token comment">//prototype</span><br><span class="token class-name">Class</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token function-variable function">print</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">var</span> first <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> second <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>first<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'ok'</span><br>second<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'ok'</span><br><br><span class="token class-name">Class</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">print</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ko'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>first<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'ko'</span><br>second<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'ko'</span></code></pre><p>Pour bien comprendre comment fonctionnent les prototypes et comment il est possible de faire de l'héritage avec cette propriété, je vous suggère vivement de lire l'article <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Inheritance_and_the_prototype_chain">Inheritance and the prototype chain</a> du <a href="https://developer.mozilla.org/en-US/">Mozilla Developer Network</a> ou encore leur introduction sur JavaScript et la programmation objet : <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Introduction_to_Object-Oriented_JavaScript">Introduction to Object-Oriented JavaScript</a>.</p></div><br><em>You enjoyed this article? Consider <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/tweet?url=https://blog.atomrc.dev/p/javascript-et-la-poo/&text=La notion de classe en Javascript&via=atomrc">tweeting it</a> :)</em></article><script src="/js/application.js" async></script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https://blog.atomrc.dev#website",
      "url": "https://blog.atomrc.dev",
      "name": "Thomas Belin",
      "description": "Freelance Front-End Architect in Paris. I leave code cleaner than I found it. Seriously into Functional and Reactive Programming.",
      "inLanguage": "fr"
    },
    {
      "@type": "BlogPosting",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.atomrc.dev/p/javascript-et-la-poo/"
      },
      "url": "https://blog.atomrc.dev/p/javascript-et-la-poo/",
      "isPartOf": {
        "@id": "https://blog.atomrc.dev#website"
      },
      "headline": "La notion de classe en Javascript",
      "description": "JavaScript est un langage orienté objet mais ne dispose pas de classes. Comment donc faire de l'objet sans classes ?",
      "image": "https://www.gravatar.com/avatar/56f2389bd912f388cc79874ce65fc0dc?s=300",
      "inLanguage": "fr",
      "publisher": {
        "@type": "Organization",
        "name": "Thomas Belin",
        "url": "https://blog.atomrc.dev",
        "logo": {
          "@type": "ImageObject",
          "url": "https://www.gravatar.com/avatar/56f2389bd912f388cc79874ce65fc0dc?s=300",
          "width": 300,
          "height": 300
        }
      },
      "author": {
        "@type": "Person",
        "name": "Thomas Belin"
      },
      "keywords": "posts,javascript,internals",
      "datePublished": "2014-01-29T00:00:00.000Z"
    }
  ]
}</script></section><div id="footer">Made with <span class="love">♥</span>️ by <a href="https://twitter.com/atomrc" rel="noopener noreferrer">@atomrc</a></div></body></html>