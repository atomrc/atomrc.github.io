<!doctype html><html lang="en"><head><title></title><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">@import url(https://fonts.googleapis.com/css?family=Open+Sans:400);
      @import url(https://fonts.googleapis.com/css?family=Montserrat:400);

      body {
        font-family: Open Sans, Arial, sans serif;
        color: #fff;
      }

      .remark-slide-content:not(.naked)::after {
        content: "@atomrc | LyonJS Janvier 2018";
        position: absolute;
        bottom: 0;
        left: 0;
        padding: 1em;
        font-size: 1em;
      }

      img {
        max-width: 90%;
        max-height: 90%;
      }

      .remark-slide-content:not(.no-bg) {
        /*background: white;*/
        background-color: #2e5c8a;
        padding: 0 3em;
      }
      .remark-container {
        background-color: #eee;
      }
      .remark-code {
        padding: 0 10em;
      }
      .remark-slide-scaler {
        box-shadow: none;
      }

      .center {
        text-align: center;
      }
      .left-align h2 {
        text-align: left;
      }
      .shadow {
        text-shadow: 1px 1px 10px black, -1px -1px 10px black;
      }

      h1,
      h2,
      h3 {
        margin: 1em;
        margin-bottom: 1em;
        text-align: center;
        font-weight: lighter;
        font-family: Montserrat;
      }

      table {
        display: inline-block;
        color: #666;
      }
      table thead {
        color: white;
      }
      table td {
        padding: 1em;
        background-color: white;
        border: 1px solid #eee;
      }

      li,
      table {
        font-size: 2em;
      }

      .semi-condensed h1 {
        margin: 0.5em;
      }
      .condensed h1 {
        margin: 0.3em;
      }

      a {
        color: inherit;
      }

      svg,
      video,
      img {
        max-width: 90%;
        max-height: 520px;
      }

      svg .hidden {
        opacity: 0;
      }

      li {
        padding: 0.5em;
      }

      .naked .foot,
      .naked .remark-slide-number {
        display: none;
      }

      .foot {
        position: absolute;
        bottom: 1em;
        left: 1em;
      }

      .remark-inline-code {
        background-color: #03002e;
        color: white;
        padding: 2px;
        border-radius: 0.2em;
      }
      .centered-code pre {
        flex: 1;
        margin: auto;
      }
      .centered-code code.hljs {
        padding: 3em;
      }

      .box {
        margin: auto;
        color: white;
        background-color: #3e3e3e;
        border-radius: 5px;
        padding: 0.5em;
      }

      .animate-from-bottom {
        position: absolute;
        top: 0;
        left: 0;
        display: flex;
        flex-direction: column;
        height: 100%;
        width: 100%;
        transform: translateY(100%);
        transition: transform 1s;
      }
      .entered .animate-from-bottom:not(.toggleable),
      .toggled .animate-from-bottom.toggleable {
        transform: translateY(0);
      }
      .sub-toggleable {
        opacity: 0;
      }
      .toggled.sub-toggled .sub-toggleable {
        opacity: 1;
      }
      .middled {
        margin: auto;
      }
      .banner {
        font-size: 2.5em;
        border-radius: 5px;
        background-color: #eee;
        color: #555;
        font-weight: bold;
        padding: 1em;
        box-shadow: 5px 5px 10px #666;
      }

      img[alt="thomas belin"] {
        border-radius: 100px;
        border: solid 5px white;
      }
      blockquote {
        text-align: center;
        background: white;
        color: #444;
        border-radius: 5px;
        padding: 0.5em 1em;
        font-size: 2em;
        position: relative;
        border: 1px solid #ccc;
      }
      blockquote::before,
      blockquote::after {
        position: absolute;
        content: "✶";
      }
      blockquote::before {
        top: 0.25em;
        left: 0.25em;
      }
      blockquote::after {
        bottom: 0.25em;
        right: 0.25em;
      }

      .hljs-github .hljs-comment {
        color: #0040f8;
      }
      .highlighted .remark-code-line:not(.remark-code-line-highlighted) {
        opacity: 0.4;
      }
      .remark-code-line-highlighted {
        background-color: inherit;
        font-weight: bold;
      }

      .huge h2 {
        font-size: 4em;
      }
      .huge h1 {
        font-size: 5em;
      }
      .big-code .remark-code {
        font-size: 1.5em;
      }
      .huge-code .remark-code {
        font-size: 2em;
      }
      .check {
        font-size: 3em;
        color: lime;
      }

      .icons img {
        width: 20%;
      }

      #slide-dyb-cycle img {
        height: 2em;
      }

      #slide-dyb-v2 video {
        width: 100%;
      }
      #slide-me {
        font-size: 2em;
      }</style></head><body class="dark"><textarea id="source">

class: no-bg
background-image: url(/img/fake-intro.png)

---
name: dyb-v2
class: middle, center, naked

<video src="/img/talk-v2-f.webm" controls autoplay loop></video>
---

class: center middle naked
# DoYouBuzz V3
## De l'impératif au réactif

LyonJS, Janvier 2018

---
class: middle
# ![doyoubuzz](//www.doyoubuzz.com/bundles/dyb/images/Common/doyoubuzz-white-large.png)

---
class: center condensed middle

![doyoubuzz resume](/img/my-resume.png)

---
class: center condensed middle

<video src="/img/dyb-edit.webm" controls autoplay loop></video>

---
layout: false
class: middle

# Nos Contraintes

---
class: center condensed
# Édition dynamique

<video src="/img/edit-load.webm" controls autoplay loop></video>

---
class: center condensed
# Visualisation blazing fast

<video src="/img/view-load.webm" controls autoplay loop></video>

---
layout: false
class: middle
> 2013

---
class: middle
> <span style="color: red">⛔</span> rendu serveur JS <span style="color: red">⛔</span>

---
class: middle center
name: ngrender

<svg xmlns="http://www.w3.org/2000/svg" width="1920" height="1080" viewBox="0 0 508 285.75" id="svg1165"><g id="layer1" transform="translate(0 -11.25)"><g transform="translate(4.812 77.672) scale(.25743)" id="g2522"><g id="g3345" transform="translate(0 49.06)"><g transform="translate(-113.637 -2.076)" id="g2508"><path id="path2502" d="M324.186 147.222H175.819c-13.78 0-24.946 11.171-24.946 24.94 0 13.78 11.166 24.951 24.946 24.951h148.367c13.774 0 24.951-11.171 24.951-24.951.001-13.769-11.176-24.94-24.951-24.94zm-3.282 33.474a8.535 8.535 0 0 1-8.534-8.534c0-4.71 3.824-8.529 8.534-8.529a8.53 8.53 0 0 1 8.533 8.529 8.53 8.53 0 0 1-8.533 8.534z"/><path id="path2504" d="M324.186 202.696H175.819c-13.78 0-24.946 11.165-24.946 24.946 0 13.781 11.166 24.946 24.946 24.946h148.367c13.774 0 24.951-11.165 24.951-24.946 0-13.781-11.176-24.946-24.951-24.946zm-3.282 33.486c-4.71 0-8.534-3.83-8.534-8.54 0-4.71 3.824-8.534 8.534-8.534 4.714 0 8.533 3.825 8.533 8.534 0 4.709-3.819 8.54-8.533 8.54z"/><path id="path2506" d="M324.186 258.171H175.819c-13.78 0-24.946 11.165-24.946 24.945 0 13.78 11.166 24.951 24.946 24.951h148.367c13.774 0 24.951-11.171 24.951-24.951 0-13.78-11.176-24.945-24.951-24.945zm-3.282 33.474c-4.71 0-8.534-3.813-8.534-8.528a8.535 8.535 0 0 1 8.534-8.534 8.531 8.531 0 0 1 8.533 8.534c.001 4.714-3.819 8.528-8.533 8.528z"/></g><g transform="translate(-113.638 -2.076)" id="g2514" fill="#ff931e"><path id="rect2510" d="M207.769 333.724h84.473v19.054h-84.473z"/><path id="rect2512" d="M244.282 314.03h11.437v28.58h-11.437z"/></g><g transform="translate(-113.632 -2.076)" id="g2520" fill="#ff931e"><path id="rect2516" d="M134.814 339.681h67.719v6.288h-67.719z"/><path id="rect2518" d="M297.472 339.681h67.714v6.288h-67.714z"/></g></g><g id="cv-view" class="hidden" stroke-linejoin="bevel"><path id="rect3128" fill="#fffdfd" stroke-width="2.115" paint-order="stroke fill markers" d="M267.277 236.238h85.904v121.493h-85.904z"/><path id="rect3132" fill="#5f5b5b" stroke-width="2.115" paint-order="stroke fill markers" d="M271.567 239.984h13.294v13.294h-13.294z"/><path id="rect3134" fill="#2b90e1" stroke-width="2.115" paint-order="stroke fill markers" d="M266.974 258.113h86.413v4.834h-86.413z"/><path id="rect3136" fill="#e1872b" stroke-width="2.115" paint-order="stroke fill markers" d="M290.421 242.522h32.329v3.626h-32.329z"/><path id="rect3138" fill="#e1942b" stroke-width="1.627" paint-order="stroke fill markers" d="M290.421 250.288h45.322v2.326h-45.322z"/><path id="rect3140" fill="#c4c4c4" stroke-width="2.115" paint-order="stroke fill markers" d="M269.543 266.19h18.908v16.878h-18.908z"/><path id="rect3142" fill="#c4c4c4" stroke-width="2.115" paint-order="stroke fill markers" d="M291.34 265.976h31.834v42.836H291.34z"/><path id="rect3144" fill="#c4c4c4" stroke-width="2.115" paint-order="stroke fill markers" d="M326.062 266.19h25.317v32.047h-25.317z"/></g><g id="cv-template" class="hidden" stroke-width="2.112" stroke-linejoin="bevel"><path id="rect3128-7" fill="#fffdfd" paint-order="stroke fill markers" d="M267.096 235.619h85.764v121.295h-85.764z"/><path id="rect3134-8" fill="#2b90e1" paint-order="stroke fill markers" d="M266.794 257.459h86.272v4.826h-86.272z"/></g><g id="cv-elements" class="hidden"><path class="cv-element" id="avatar" fill="#5f5b5b" stroke-width="2.115" stroke-linejoin="bevel" paint-order="stroke fill markers" d="M271.566 239.983h13.296v13.296h-13.296z"/><path class="cv-element" id="head-title" fill="#e1872b" stroke-width="2.115" stroke-linejoin="bevel" paint-order="stroke fill markers" d="M290.417 242.522h32.333v3.626h-32.333z"/><path class="cv-element" id="head-subtitle" fill="#e1942b" stroke-width="1.628" stroke-linejoin="bevel" paint-order="stroke fill markers" d="M290.416 250.288h45.327v2.326h-45.327z"/><path class="cv-element" id="content-left" fill="#c4c4c4" stroke-width="2.115" stroke-linejoin="bevel" paint-order="stroke fill markers" d="M269.543 266.188h18.91v16.88h-18.91z"/><path class="cv-element" id="content-middle" fill="#c4c4c4" stroke-width="2.115" stroke-linejoin="bevel" paint-order="stroke fill markers" d="M291.34 265.976h31.837v42.841H291.34z"/><path class="cv-element" id="content-right" fill="#c4c4c4" stroke-width="2.115" stroke-linejoin="bevel" paint-order="stroke fill markers" d="M326.062 266.186h25.32v32.051h-25.32z"/></g><text style="line-height:25.69449997px" x="697.535" y="-101.096" id="text3425" class="hidden view-mode" font-weight="400" font-size="41.111" font-family="sans-serif" letter-spacing="0" word-spacing="0" fill="#fff" stroke-width="1.028"><tspan id="tspan3423" x="697.535" y="-101.096" font-size="98.667">View mode</tspan></text><text style="line-height:25.69449997px" x="714.566" y="-98.623" id="text3429" class="hidden edit-mode" font-weight="400" font-size="41.111" font-family="sans-serif" letter-spacing="0" word-spacing="0" fill="#fff" stroke-width="1.028"><tspan id="tspan3427" x="714.566" y="-98.623" font-size="98.667">Edit mode</tspan></text></g></g><g id="angular" class="hidden" transform="translate(-96.309 -42.333)" stroke-width=".013"><path d="M347.314 161.237l-17.853 6.282 2.82 23.39 15.052 8.273 15.128-8.384 2.82-23.39z" id="path14" fill="#b3b3b3"/><path d="M363.5 168.76l-16.228-5.534v33.98l13.6-7.527z" id="path16" fill="#af2b2d"/><path d="M331.464 168.86l2.417 20.919 13.39 7.427v-33.98z" id="path18" fill="#df2e31"/><path d="M351.034 180.127l-3.733-7.794-3.285 7.794zm1.422 3.277h-9.892l-2.214 5.536-4.116.076 11.038-24.556 11.423 24.556h-3.816z" id="path20" fill="#f2f2f2"/><path d="M347.272 164.46l.03 7.873 3.728 7.8h-3.75l-.008 3.266 5.185.005 2.423 5.613 3.939.073z" id="path22" fill="#b3b3b3"/></g></svg>

---
class: middle
```javascript
<div class="widget &lt;? $widget_name ?>" &lt;? if iseditable($widget_name) ?>
  ng-show="shouldDisplay(&lt;? $widget_name ?>
  &lt;? endif ?>
  >
</div>
```

---
class: middle
```javascript
&lt;? if edit ?>
  <div ng-repeat="element in cv[&lt;? $widget_name ?>]">
    ...
  </div>
&lt;? else ?>
  &lt;? for element in cv[$widget_name] ?>
    ...
  &lt;? endfor ?>
&lt;? endif ?>
```

---
class: middle
# Bilan

> 176 designs `twig` + rendu hybride 🤢

---
layout: false
class: middle
# 2017 : DoYouBuzz V3.0

---
class: center condensed
# Nouvelle Vision : le PDF

![dyb pdf](/img/pdf.png)

---
layout: false
class: middle

# Nouvelle Techno

---
class: middle center icons
![redux](https://raw.githubusercontent.com/reactjs/redux/master/logo/logo.png)
VS.
![cycle.js](https://cdn-images-1.medium.com/max/800/1*en0KY03MHunAXUr8UbqYGw.png)

---
class: middle
# Redux 💖 : State Centralisé

---
class: middle
# Redux 💖 : Grosse communauté

---
class: middle
# Redux 💖 : Fonction pures

--
### (sauf les actions)

---
class: middle
# Redux 💖 : Devtools 🤘

---
layout: true
# Redux 💔

---
class: center
### Archi non fractale

![redux non fract](https://tryolabs.com/images/blog/post-images/2016-04-19-understanding-the-redux-paradigm/redux-simple-f8-diagram.png)
???
Portée fonctionnelle des composants

---
### Identifiants d'action

```javascript
export const ADD_TODO="ADD_TODO";
export const REMOVE_TODO="REMOVE_TODO";
export const UPDATE_TODO="UPDATE_TODO";

export const UPDATE_TODO_SUCCESS="UPDATE_TODO_SUCCESS";
export const UPDATE_TODO_ERROR="UPDATE_TODO_ERROR";
// ...
```

???
Fatiguant à faire
On aime pas nommer les choses
Comment ça scale ça ?

---
### Actions chainées

```javascript
function updateCVAction(cv) {

  return function (dispatch) {
    dispatch(updateCvStart(cv))
    api.updateCV(cv)
      .then(response => dispatch(updateCvDone(response)))
      .then(() => dispatch(fetchCVCompletionAction(cv)))
  }

}
```

---
class: highlighted
### Actions chainées

```javascript
function updateCVAction(cv) {

  return function (dispatch) {
    dispatch(updateCvStart(cv))
    api.updateCV(cv)
      .then(response => dispatch(updateCvDone(response)))
*     .then(() => dispatch(fetchCVCompletionAction(cv))) // SRP fail
  }

}
```
---
### Handlers dans la vue

```html
&lt;input
  onFocus={ /*...*/  }
  onBlur={ /*...*/ }
  onInput={ /*...*/ }
  />
```

---
layout: false
class: middle
# Cycle 💖 : Une archi plus qu'une tech

---
class: middle
# Cycle 💖 : Fractal
### (composant = app cycle)

![cycle fractal](/img/cycle-fractal.svg)

---
class: middle
# Cycle 💖 : State centralisé
### (avec `onionify`)

---
class: middle
# Cycle 💖 : Fonctions pures 😍
### (all the way)

---
class: middle
# Cycle 💖 : Programmation Réactive

```javascript
const a = fromEvent(inputA, "change")
  .map(ev => ev.target.value);

const b = fromEvent(inputB, "change")
  .map(ev => ev.target.value);

// c === a + b (over time!!)
const c = combine(a, b)
  .map(([a, b] => a + b)
```

---
# Cycle 💖

```javascript
function updateCVAction(cv) {

  return function (dispatch) {
    dispatch(updateCvStart(cv))
    api.updateCV(cv)
      .then(response => dispatch(updateCvDone(cv)))
      .then(() => dispatch(fetchCVCompletionAction(cv)))
  }

}
```

---
# Cycle 💖

```javascript
function CvEditor({ DOM }) {
  return {
    HTTP: DOM.select("form")
      .events("submit")
      .mapTo({ url: "/cv/update", category: "cv_update" })
  }
}
```

--


```javascript
function Completion({ HTTP }) {
  const fetchCompletion$ = HTTP
    .select("cv_update")
    .flatten()
    .mapTo({ url: "/cv/completion", category: "completion" })

  return {
    HTTP: fetchCompletion$
  }
}
```

---
layout: true
# Cycle 💔

---
## Brain rewiring

- 🤔 Programmation temporelle ?
- 🤔 Property vs. Event ?
- 🤔 ~ Cold Observable vs. Hot Observable ?

---
class: condensed center
## Stack Traces 🤢

![cycle stack](/img/cycle-stack.png)

---
class: condensed highlighted
## Selecteurs

```javascript
return {
* HTTP: DOM.select("button.update")
    .events("click")
    .mapTo({
      url: "..",
*     category: "cv_udpate"
    })
}

// ...

*HTTP.select("cv_update")

```

---
## Isolation du DOM compliquée

```javascript
isolate(Component);

isolate(Component, "key");

isolate(Component, { DOM: "key" });

isolate(Component, { DOM: ".key" });
```

---
class: middle
layout: false

# Back to DoYouBuzz
## Une dernière containte
---
class: middle center

> Pas question de réécrire nos 176 designs !

---
class: middle

## Le rendu des CV ?

### SSR + virtual DOM ?

---
layout: false
class: middle
# PoC Time

---
class: center condensed
# V3.0 : PoC
<video src="/img/jesus-revient.webm" controls autoplay loop></video>

---
# SSR + virtual DOM : React

```javascript
class CvViewer extends React.Component {
  construct(props) {
    this.state = { view: "" }
  }

  componentDidMount() {
    fetch("/render")
      .then(response => response.raw())
      .then(view => this.setState({ view })
  }

  render() {
    return <div dangerouslysetinnerhtml="{" { __html: this.state.view } }></div>
  }
}
```

---
# SSR + virtual DOM : Cycle

```javascript
function CvViewer({ HTTP }) {

  const view$ = HTTP
    .select("render")
    .flatten()
    .map(response => response.body)
    .map(view => div({ props: { innerHTML: view }}))

  return {
    DOM: view$,
    HTTP: xs.of({ url: "/render" })
  }
}
```

---
class: center
# Fight: Useless Metrics!

|        | Redux      | Cycle      |
|--------|------------|------------|
| load   | ~800-900ms | ~800-900ms |
| size   | 281kB      | 107kB      |

---
class: center
# Fight: Feature

![fractality](/img/completion.png)

---
class: center
# Fight: F(r)a(c)tality!

![completion cycle](/img/diff-cycle.png)
![completion react](/img/diff-react.png)

???
Plus de fichier modifiés. Découpage par `job` plutot que par `function`

---
class: center condensed small-table
# Fight: F(r)a(c)tality!

<svg xmlns="http://www.w3.org/2000/svg" width="1980" height="1080" viewBox="0 0 523.875 285.75" id="svg8"><g id="layer1" transform="translate(0 -11.25)"><g id="g4655"><rect ry="4.544" y="59.932" x="45.703" height="175.863" width="98.088" id="rect4537" fill="#fff" stroke="#000" stroke-width="1.323" paint-order="stroke fill markers"/><text id="text4521" y="74.345" x="64.114" style="line-height:6.61458302px" font-weight="400" font-size="10.583" font-family="sans-serif" letter-spacing="0" word-spacing="0" stroke-width=".265"><tspan y="74.345" x="64.114" id="tspan4519">Completion</tspan></text><path id="rect4523" fill="#a7d6ff" stroke-width=".336" paint-order="stroke fill markers" d="M57.044 87.299h74.011v36.525H57.044z"/><path id="rect4533" fill="#77b9f3" stroke-width=".336" paint-order="stroke fill markers" d="M57.8 136.625h74.011v36.525H57.8z"/><path id="rect4535" fill="#1f88e1" stroke-width=".336" paint-order="stroke fill markers" d="M58.177 185.951h74.011v36.525H58.177z"/><text id="text4541" y="109.507" x="74.932" style="line-height:6.61458302px" font-weight="400" font-size="10.583" font-family="sans-serif" letter-spacing="0" word-spacing="0" stroke-width=".265"><tspan y="109.507" x="74.932" id="tspan4539">Actions</tspan></text><text id="text4545" y="158.833" x="70.021" style="line-height:6.61458302px" font-weight="400" font-size="10.583" font-family="sans-serif" letter-spacing="0" word-spacing="0" stroke-width=".265"><tspan y="158.833" x="70.021" id="tspan4543">Reducers</tspan></text><text id="text4549" y="208.159" x="80.086" style="line-height:6.61458302px" font-weight="400" font-size="10.583" font-family="sans-serif" letter-spacing="0" word-spacing="0" fill="#fff" stroke-width=".265"><tspan id="tspan4551" y="208.159" x="80.086">Views</tspan></text></g><g id="g4623" transform="translate(-11.76 -9.285)"><path id="rect4513" fill="#a7d6ff" stroke-width=".265" paint-order="stroke fill markers" d="M232.077 83.821h86.179v146.655h-86.179z"/><text id="text4541-3" y="97.019" x="256.049" style="line-height:6.61458349px" font-weight="400" font-size="10.583" font-family="sans-serif" letter-spacing="0" word-spacing="0" stroke-width=".265"><tspan y="97.019" x="256.049" id="tspan4539-6">Actions</tspan></text><g transform="translate(-.255 .733)" id="g4598"><rect ry="4.544" y="141.182" x="236.534" height="30.469" width="77.775" id="rect4589" fill="#fff" stroke="#000" stroke-width="1.323" paint-order="stroke fill markers"/><text style="line-height:6.61458302px" x="245.265" y="159.336" id="text4593" font-weight="400" font-size="10.583" font-family="sans-serif" letter-spacing="0" word-spacing="0" stroke-width=".265"><tspan id="tspan4591" x="245.265" y="159.336">Completion</tspan></text></g></g><g id="g4632" transform="translate(-11.76 -9.285)"><path id="rect4515" fill="#77b9f3" stroke-width=".265" paint-order="stroke fill markers" d="M329.595 83.821h86.179v146.655h-86.179z"/><text style="line-height:6.61458302px" x="347.9" y="97.628" id="text4583" font-weight="400" font-size="10.583" font-family="sans-serif" letter-spacing="0" word-spacing="0" stroke-width=".265"><tspan id="tspan4581" x="347.9" y="97.628">Reducers</tspan></text><g transform="translate(97.263 .733)" id="g4606"><rect id="rect4600" width="77.775" height="30.469" x="236.534" y="141.182" ry="4.544" fill="#fff" stroke="#000" stroke-width="1.323" paint-order="stroke fill markers"/><text id="text4604" y="159.336" x="245.265" style="line-height:6.61458302px" font-weight="400" font-size="10.583" font-family="sans-serif" letter-spacing="0" word-spacing="0" stroke-width=".265"><tspan y="159.336" x="245.265" id="tspan4602">Completion</tspan></text></g></g><g id="g4641" transform="translate(-11.76 -7.395)"><path id="rect4511" fill="#1f88e1" stroke-width=".265" paint-order="stroke fill markers" d="M427.113 81.932h86.179v146.655h-86.179z"/><text style="line-height:6.61458302px" x="455.105" y="94.837" id="text4587" font-weight="400" font-size="10.583" font-family="sans-serif" letter-spacing="0" word-spacing="0" fill="#fff" stroke-width=".265"><tspan x="455.105" y="94.837" id="tspan4585">Views</tspan></text><g id="g4614" transform="translate(194.781 -1.157)"><rect ry="4.544" y="141.182" x="236.534" height="30.469" width="77.775" id="rect4608" fill="#fff" stroke="#000" stroke-width="1.323" paint-order="stroke fill markers"/><text style="line-height:6.61458302px" x="245.265" y="159.336" id="text4612" font-weight="400" font-size="10.583" font-family="sans-serif" letter-spacing="0" word-spacing="0" stroke-width=".265"><tspan id="tspan4610" x="245.265" y="159.336">Completion</tspan></text></g></g></g></svg>

<style>
.small-table table {
  text-align: left;
  font-size: 1em;
}
</style>
---
class: middle center

![code orga](/img/code-orga.png)

---
class: center condensed small-table
# Fight: F(r)a(c)tality!

<svg xmlns="http://www.w3.org/2000/svg" width="1980" height="1080" viewBox="0 0 523.875 285.75" id="svg8"><g id="layer1" transform="translate(0 -11.25)"><g id="g4623" transform="translate(-110.747 -3.024)"><path id="rect4513" d="M232.077 83.821h86.179v146.655h-86.179z" fill="#a7d6ff" stroke-width=".265" paint-order="stroke fill markers"/><text id="text4541-3" y="97.019" x="256.049" style="line-height:6.61458349px" font-weight="400" font-size="10.583" letter-spacing="0" word-spacing="0" font-family="sans-serif" stroke-width=".265"><tspan y="97.019" x="256.049" id="tspan4539-6">Actions</tspan></text><g transform="translate(-.255 -20.434)" id="g4598"><rect ry="4.544" y="141.182" x="236.534" height="30.469" width="77.775" id="rect4589" fill="#fff" stroke="#000" stroke-width="1.323" paint-order="stroke fill markers"/><text style="line-height:6.61458302px" x="251.086" y="159.336" id="text4593" font-weight="400" font-size="10.583" letter-spacing="0" word-spacing="0" class="cv-editor-txt" font-family="sans-serif" stroke-width=".265"><tspan id="tspan4591" x="251.086" y="159.336">CvEditor</tspan></text></g><g id="g975" transform="translate(-.255 21.9)"><rect id="rect969" width="77.775" height="30.469" x="236.534" y="141.182" ry="4.544" fill="#fff" stroke="#000" stroke-width="1.323" paint-order="stroke fill markers"/><text word-spacing="0" letter-spacing="0" font-size="10.583" font-weight="400" id="text973" y="159.336" x="245.265" style="line-height:6.61458302px" font-family="sans-serif" stroke-width=".265"><tspan y="159.336" x="245.265" id="tspan971">Completion</tspan></text></g><g transform="matrix(.49024 0 0 .49024 156.535 64.134)" id="g999" class="embed-completion"><rect ry="4.544" y="141.182" x="236.534" height="30.469" width="77.775" id="rect993" fill="#fff" stroke="#000" stroke-width="1.323" paint-order="stroke fill markers"/><text style="line-height:6.61458302px" x="245.265" y="159.336" id="text997" font-weight="400" font-size="10.583" letter-spacing="0" word-spacing="0" font-family="sans-serif" stroke-width=".265"><tspan id="tspan995" x="245.265" y="159.336">Completion</tspan></text></g></g><g id="g4632" transform="translate(-110.747 -3.024)"><path id="rect4515" d="M329.595 83.821h86.179v146.655h-86.179z" fill="#77b9f3" stroke-width=".265" paint-order="stroke fill markers"/><text style="line-height:6.61458302px" x="347.9" y="97.628" id="text4583" font-weight="400" font-size="10.583" letter-spacing="0" word-spacing="0" font-family="sans-serif" stroke-width=".265"><tspan id="tspan4581" x="347.9" y="97.628">Reducers</tspan></text><g transform="translate(97.263 -20.434)" id="g4606"><rect id="rect4600" width="77.775" height="30.469" x="236.534" y="141.182" ry="4.544" fill="#fff" stroke="#000" stroke-width="1.323" paint-order="stroke fill markers"/><text id="text4604" y="159.336" x="250.557" style="line-height:6.61458302px" font-weight="400" font-size="10.583" letter-spacing="0" word-spacing="0" font-family="sans-serif" stroke-width=".265"><tspan y="159.336" x="250.557" id="tspan4602">CvEditor</tspan></text></g><g id="g983" transform="translate(97.263 21.9)"><rect ry="4.544" y="141.182" x="236.534" height="30.469" width="77.775" id="rect977" fill="#fff" stroke="#000" stroke-width="1.323" paint-order="stroke fill markers"/><text word-spacing="0" letter-spacing="0" font-size="10.583" font-weight="400" style="line-height:6.61458302px" x="245.265" y="159.336" id="text981" font-family="sans-serif" stroke-width=".265"><tspan id="tspan979" x="245.265" y="159.336">Completion</tspan></text></g></g><g id="g4641" transform="translate(-110.747 -1.134)"><path id="rect4511" d="M427.113 81.932h86.179v146.655h-86.179z" fill="#1f88e1" stroke-width=".265" paint-order="stroke fill markers"/><text style="line-height:6.61458302px" x="455.105" y="94.837" id="text4587" font-weight="400" font-size="10.583" letter-spacing="0" word-spacing="0" font-family="sans-serif" fill="#fff" stroke-width=".265"><tspan x="455.105" y="94.837" id="tspan4585">Views</tspan></text><g id="g4614" transform="translate(194.781 -22.324)"><rect ry="4.544" y="141.182" x="236.534" height="30.469" width="77.775" id="rect4608" fill="#fff" stroke="#000" stroke-width="1.323" paint-order="stroke fill markers"/><text style="line-height:6.61458302px" x="251.615" y="159.336" id="text4612" font-weight="400" font-size="10.583" letter-spacing="0" word-spacing="0" font-family="sans-serif" stroke-width=".265"><tspan id="tspan4610" x="251.615" y="159.336">CvEditor</tspan></text></g><g transform="translate(194.781 20.01)" id="g991"><rect id="rect985" width="77.775" height="30.469" x="236.534" y="141.182" ry="4.544" fill="#fff" stroke="#000" stroke-width="1.323" paint-order="stroke fill markers"/><text word-spacing="0" letter-spacing="0" font-size="10.583" font-weight="400" id="text989" y="159.336" x="245.265" style="line-height:6.61458302px" font-family="sans-serif" stroke-width=".265"><tspan y="159.336" x="245.265" id="tspan987">Completion</tspan></text></g></g></g></svg>

<style>
svg .embed-completion {
  opacity: 0;
  transition: opacity 0.5s;
}
.toggled .embed-completion {
  opacity: 1;
}

svg .cv-editor-txt {
  transition: transform 0.5s;
}
.toggled .cv-editor-txt {
  transform: translateY(-8px);
}
</style>
---
name: dyb-cycle
layout: false
class: middle

# ![doyoubuzz](//www.doyoubuzz.com/bundles/dyb/images/Common/doyoubuzz-white-large.png) + ![cycle.js](https://cdn-images-1.medium.com/max/800/1*en0KY03MHunAXUr8UbqYGw.png)

---
class: center condensed
# DoYouBuzz + Cycle

![embed cycle](/img/embed-cycle.png)

---
# One Last Directive

```html
<div cv-editor></div>
```

--
```javascript
// ngApp.js
app.directive("cvEditor", function () {
  return function ($scope, $element) {
    launchCvEditor($element);
  }
});
```

--
```typescript
// cycleApp.ts
function launchCvEditor(rootElement: HTMLElement) {
  run(main, {
    DOM: makeDOMDriver(rootElement)
  });
}
```

---
class: middle
# Cycle ↔ Angular

---
class: center condensed
# Cycle ↔ Angular
![embed cycle](/img/com-bidir.png)

---
class: condensed
# Angular → Cycle : Props

```html
<div cv-editor="cv"></div>
```

--

```diff
// ngApp.js
app.directive("cvEditor", function () {
  return {
+   scope: { cv: "cvEditor" },
    link: function ($scope, $element) {
+     launchCvEditor($scope.cv, $element);
    }
  }
});
```

--

```diff
// cycleApp.ts
function launchCvEditor(cv: Cv, rootElement: HTMLElement) {
+ const initialState: AppState = { cv };
+ const main = makeMain(initialState);

  run(main, {
    DOM: makeDOMDriver(rootElement)
  });
}
```

---
class: condensed
# Angular → Cycle : Events

```javascript
// ngApp.js
function ($scope, $element) {
  launchCvEditor($scope.cv, $element);

  $scope.$watch("cv", function (cv) {
    const event = new CustomEvent("cvUpdated", { detail: { cv }});
    document.dispatchEvent(event);
  });
}
```

--
```typescript
// dybMessageDriver.ts
function dybMessageDriver() {
  return fromEvent(document, "cvUpdated");
}
```

--
```javascript
// cvViewer.ts
function CvViewer({ dybMessages }) {
  return {
    HTTP: dybMessages
      .filter("cvUpdated")
      .mapTo("/render")
  }
}
```

---
class: condensed
# Cycle → Angular : Events

```typescript
// dybMessageDriver.ts
function dybMessageDriver(message$: Stream<message>) {

  message$
    .addListener({
      next: function (message: Message) {
        dispatchEvent(message.event, message.payload)
      }
    });

  return fromEvent(document, "cvUpdated");
}
```

--
```typescript
// cvEditor.ts
function CvEditor({ DOM }: Sources) {
  return {
    dybMessage: DOM
      .select(".edit-button")
      .events("click")
      .mapTo({ event: "editElement", payload: { elementId }})
  }
}
```

---
class: center condensed
# Cycle ↔ Angular
![embed cycle](/img/com-bidir.png)

???
En somme notre application Cycle devient une sorte de webcomponent indépendant

---
class: middle

# Rendu de CV

---
class: condensed center
# Dafuq is that flash?

<video src="/img/render-flash.webm" controls autoplay loop></video>

---
class: middle
```typescript
const view$: Stream<vnode> = viewStr$
  .map((view: string) => div("#cv-editor", { props: { innerHTML: view }}))
```

---
class: middle
# Virtual DOM à la rescousse

---
class: middle
```diff
const cvVnode$: Stream<vnode> = viewStr$
+ .map(toVnode)
- .map((view: string) => div("#cv-editor", { props: { innerHTML: view }}))
+ .map((vnode: VNode) => div("#cv-editor", [vnode]))
```

---
class: middle

# Les boutons d'édition

---
class: center
# Les boutons d'édition

![no edit](/img/render-no-edit.png)

---
class: center
# Les boutons d'édition

![edit](/img/render-edit.png)

---
# Step 1 : Marqueurs d'éléments

```diff
<div>
+ <div widget-element="xp-12"></div>
  <h4>Lead Front End Developer @ DoYouBuzz</h4>
  <div>...</div>
</div>
```

---
# Step 2 : Extraction des éditeurs

```typescript
const visibleElements$ = cvVnode$
  .map((vnode: VNode) => select("[widget-element]", vnode))
  .map((elements: [VNode]) => createWidgetElements(elements))
```

---
# Step 3 : Insertion des éditeurs

```typescript
const editorVnode$ = xs
  .combine(cvVnode$, visibleElementVnodes$)
  .map(insertEditors);
```

--
```typescript
function insertEditors([cvVnode, elementVnodes]) {
  const widgetElements = select("[widget-element]", cvVnode);

  widgetElements
    .forEach(function (element: VNode) {
      element.children = [
        findElement(elementVnodes, cvVnode),
        ...element.children
      ]
    });

  return cvVnode;
}
```

---
class: center condensed
name: rendering
# Insertion de l'éditeur

<svg xmlns="http://www.w3.org/2000/svg" width="1920" height="1080" viewBox="0 0 508 285.75" id="svg8"><g id="htmlstring" transform="translate(-31.75)"><circle id="circle873" cx="32.411" cy="197.239" r="23.688" fill="#fff" stroke-width="1.245" stroke-linejoin="bevel" paint-order="stroke fill markers"/><g aria-label="&quot;&lt;html&gt;&quot;" style="line-height:6.61458302px" id="text877" font-weight="400" font-size="8.467" font-family="DejaVu Sans Mono" letter-spacing="0" word-spacing="0" fill="red" stroke-width=".265"><path d="M15.737 194.305v2.295h-.72v-2.295zm-1.584 0v2.295h-.72v-2.295z" style="-inkscape-font-specification:'DejaVu Sans Mono'" id="path1058"/><path d="M21.863 196.505l-3.514 1.323 3.514 1.31v.757l-4.37-1.728v-.687l4.37-1.728z" style="-inkscape-font-specification:'DejaVu Sans Mono'" id="path1060"/><path d="M26.568 197.609v2.869h-.765v-2.87q0-.624-.219-.917-.22-.294-.686-.294-.534 0-.823.38-.285.377-.285 1.084v2.617h-.76v-6.433h.76v2.497q.202-.397.55-.6.347-.206.822-.206.707 0 1.054.467.352.463.352 1.406z" style="-inkscape-font-specification:'DejaVu Sans Mono'" id="path1062"/><path d="M29.855 194.533v1.314h1.728v.592h-1.728v2.513q0 .513.194.715.194.203.678.203h.856v.608h-.93q-.856 0-1.208-.343-.351-.344-.351-1.183v-2.513h-1.236v-.592h1.236v-1.314z" style="-inkscape-font-specification:'DejaVu Sans Mono'" id="path1064"/><path d="M35.204 196.319q.14-.298.356-.438.219-.145.525-.145.558 0 .785.434.232.43.232 1.625v2.683h-.695v-2.65q0-.98-.112-1.216-.107-.24-.396-.24-.331 0-.455.257-.12.252-.12 1.199v2.65h-.695v-2.65q0-.992-.12-1.224-.115-.232-.421-.232-.302 0-.422.257-.116.252-.116 1.199v2.65h-.69v-4.63h.69v.396q.137-.248.34-.376.206-.132.467-.132.314 0 .52.145.211.144.327.438z" style="-inkscape-font-specification:'DejaVu Sans Mono'" id="path1066"/><path d="M40.144 198.8q0 .512.186.772.19.26.558.26h.89v.646h-.964q-.682 0-1.058-.439-.372-.438-.372-1.24v-4.204h-1.22V194h1.98z" style="-inkscape-font-specification:'DejaVu Sans Mono'" id="path1068"/><path d="M42.96 196.505v-.753l4.37 1.728v.687l-4.37 1.728v-.757l3.514-1.31z" style="-inkscape-font-specification:'DejaVu Sans Mono'" id="path1070"/><path d="M51.39 194.305v2.295h-.72v-2.295zm-1.584 0v2.295h-.72v-2.295z" style="-inkscape-font-specification:'DejaVu Sans Mono'" id="path1072"/></g></g><g id="elements"><circle r="23.688" cy="85.866" cx="253.289" id="circle982" fill="#fff" stroke-width="1.245" stroke-linejoin="bevel" paint-order="stroke fill markers"/><g transform="translate(5.167 -5.754)" id="g1019" fill="none" stroke="red" stroke-width="1.323" stroke-linecap="round" stroke-linejoin="round"><rect ry="0" y="88.31" x="229.499" height="6.62" width="9.85" id="rect848" paint-order="stroke fill markers"/><rect id="rect878" width="9.85" height="6.62" x="256.894" y="88.31" ry="0" paint-order="stroke fill markers"/><rect ry="0" y="88.31" x="243.196" height="6.62" width="9.85" id="rect880" paint-order="stroke fill markers"/></g></g><g id="vnode-2" transform="translate(-49.742 42.333)"><circle id="circle873-3" cx="171.648" cy="154.533" r="23.688" fill="#fff" stroke-width="1.245" stroke-linejoin="bevel" paint-order="stroke fill markers"/><rect id="rect819" width="7.619" height="5.121" x="164.841" y="141.068" ry="0" fill="none" stroke="#2e0000" stroke-width="1.023" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><rect ry="0" y="151.818" x="158.95" height="5.121" width="7.619" id="rect823" fill="none" stroke="#2e0000" stroke-width="1.023" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><rect id="rect825" width="7.619" height="5.121" x="170.733" y="151.818" ry="0" fill="none" stroke="#2e0000" stroke-width="1.023" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><path d="M162.713 151.939l5.994-5.893 6.203 5.995" id="path829" fill="none" fill-rule="evenodd" stroke="#2e0000" stroke-width="1.023" stroke-linejoin="bevel"/><rect id="rect831" width="7.619" height="5.121" x="164.945" y="162.878" ry="0" fill="none" stroke="#2e0000" stroke-width="1.023" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><rect ry="0" y="162.878" x="176.728" height="5.121" width="7.619" id="rect833" fill="none" stroke="#2e0000" stroke-width="1.023" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><path id="path835" d="M168.708 162.998l5.995-5.891 6.202 5.994" fill="none" fill-rule="evenodd" stroke="#2e0000" stroke-width="1.023" stroke-linejoin="bevel"/></g><g id="vnode-1" transform="translate(-49.742 42.333)"><circle r="23.688" cy="154.533" cx="171.648" id="circle925" fill="#fff" stroke-width="1.245" stroke-linejoin="bevel" paint-order="stroke fill markers"/><rect ry="0" y="141.068" x="164.841" height="5.121" width="7.619" id="rect927" fill="none" stroke="#2e0000" stroke-width="1.023" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><rect id="rect929" width="7.619" height="5.121" x="158.95" y="151.818" ry="0" fill="none" stroke="#2e0000" stroke-width="1.023" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><rect ry="0" y="151.818" x="170.733" height="5.121" width="7.619" id="rect931" fill="none" stroke="#2e0000" stroke-width="1.023" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><path id="path933" d="M162.713 151.939l5.994-5.893 6.203 5.995" fill="none" fill-rule="evenodd" stroke="#2e0000" stroke-width="1.023" stroke-linejoin="bevel"/><rect ry="0" y="162.878" x="164.945" height="5.121" width="7.619" id="rect935" fill="none" stroke="#2e0000" stroke-width="1.023" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><rect id="rect937" width="7.619" height="5.121" x="176.728" y="162.878" ry="0" fill="none" stroke="#2e0000" stroke-width="1.023" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><path d="M168.708 162.998l5.995-5.891 6.202 5.994" id="path939" fill="none" fill-rule="evenodd" stroke="#2e0000" stroke-width="1.023" stroke-linejoin="bevel"/></g><g transform="translate(31.986 116.77)" id="g941"><path id="rect912" d="M58.265 55.656h62.541v49.445H58.265z" fill="#fffefe" stroke="#000" stroke-width="2.646" stroke-linejoin="bevel" paint-order="stroke fill markers"/><text style="line-height:6.61458302px;-inkscape-font-specification:'DejaVu Sans Mono'" x="67.224" y="84.324" id="text916" font-weight="400" font-size="10.583" letter-spacing="0" word-spacing="0" font-family="DejaVu Sans Mono" stroke-width=".265"><tspan x="67.224" y="84.324" style="-inkscape-font-specification:'DejaVu Sans Mono'" id="tspan918">toVnode</tspan></text></g><g transform="translate(77.314 21.357)" id="g976"><path id="rect922" d="M145.415 40.249h62.541v49.445h-62.541z" fill="#fff" stroke="#000" stroke-width="2.646" stroke-linejoin="bevel" paint-order="stroke fill markers"/><text id="text926" y="68.612" x="154.602" style="line-height:6.61458302px;-inkscape-font-specification:'DejaVu Sans Mono'" font-weight="400" font-size="10.583" letter-spacing="0" word-spacing="0" font-family="DejaVu Sans Mono" stroke-width=".265"><tspan id="tspan924" style="-inkscape-font-specification:'DejaVu Sans Mono'" y="68.612" x="154.602">extract</tspan></text></g><g id="final-vnode" transform="translate(60.854 40.217)"><circle id="circle1006" cx="325.686" cy="156.89" r="23.688" fill="#fff" stroke-width="1.245" stroke-linejoin="bevel" paint-order="stroke fill markers"/><g transform="translate(115.315 49.431) scale(.64709)" fill="none" stroke-width="1.323"><rect id="rect882" width="9.85" height="6.62" x="319.606" y="142.172" ry="0" stroke="#000" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><rect ry="0" y="156.07" x="311.989" height="6.62" width="9.85" id="rect884" stroke="#000" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><rect id="rect886" width="9.85" height="6.62" x="327.223" y="156.07" ry="0" stroke="#000" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><path d="M316.853 156.225l7.751-7.617 8.018 7.75" id="path888" fill-rule="evenodd" stroke="#000" stroke-linejoin="bevel"/><rect id="rect890" width="9.85" height="6.62" x="319.739" y="170.369" ry="0" stroke="#000" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><rect ry="0" y="170.369" x="334.974" height="6.62" width="9.85" id="rect892" stroke="#000" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><path id="path894" d="M324.604 170.524l7.751-7.617 8.018 7.75" fill-rule="evenodd" stroke="#000" stroke-linejoin="bevel"/><path id="path906" d="M310.305 170.39l6.95-7.483" fill-rule="evenodd" stroke="#000"/><rect id="rect898" width="9.85" height="6.62" x="305.381" y="170.085" ry="0" stroke="red" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><path id="path908" d="M324.664 177.34v5.757" fill-rule="evenodd" stroke="#000"/><rect ry="0" y="183.336" x="319.739" height="6.62" width="9.85" id="rect900" stroke="red" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/><path id="path910" d="M339.899 177.34v5.757" fill-rule="evenodd" stroke="#000"/><rect id="rect902" width="9.85" height="6.62" x="334.974" y="183.336" ry="0" stroke="red" stroke-linecap="round" stroke-linejoin="round" paint-order="stroke fill markers"/></g></g><g transform="translate(72.437 124.253)" id="g971"><path id="rect928" d="M282.771 48.172h62.541v49.445h-62.541z" fill="#fff" stroke="#000" stroke-width="2.646" stroke-linejoin="bevel" paint-order="stroke fill markers"/><text id="text932" y="76.84" x="294.999" style="line-height:6.61458302px;-inkscape-font-specification:'DejaVu Sans Mono'" font-weight="400" font-size="10.583" letter-spacing="0" word-spacing="0" font-family="DejaVu Sans Mono" stroke-width=".265"><tspan id="tspan930" style="-inkscape-font-specification:'DejaVu Sans Mono'" y="76.84" x="294.999">insert</tspan></text></g></svg>

---
class: center condensed
name: cyclerender
# Insertion de l'éditeur

<svg xmlns="http://www.w3.org/2000/svg" width="1920" height="1080" viewBox="0 0 508 285.75" id="svg1165"><g id="layer1" transform="translate(0 -11.25)"><g id="g1750" class="buttons hidden" fill="#0095ff" stroke-width=".384"><rect ry="1.8" y="131.159" x="129.379" height="15.098" width="15.098" id="rect1664" paint-order="stroke fill markers"/><rect id="rect1666" width="15.098" height="15.098" x="164.174" y="131.159" ry="1.8" paint-order="stroke fill markers"/><rect ry="1.8" y="131.159" x="146.776" height="15.098" width="15.098" id="rect1670" paint-order="stroke fill markers"/></g><g id="g1758" class="buttons hidden" fill="#0095ff" stroke-width=".384"><rect id="rect1677" width="15.098" height="15.098" x="129.379" y="112.579" ry="1.8" paint-order="stroke fill markers"/><rect ry="1.8" y="112.579" x="164.174" height="15.098" width="15.098" id="rect1679" paint-order="stroke fill markers"/><rect id="rect1681" width="15.098" height="15.098" x="146.776" y="112.579" ry="1.8" paint-order="stroke fill markers"/></g><g id="g1766" class="buttons hidden" fill="#0095ff" stroke-width=".384"><rect ry="1.8" y="94.833" x="129.379" height="15.098" width="15.098" id="rect1701" paint-order="stroke fill markers"/><rect id="rect1703" width="15.098" height="15.098" x="164.174" y="94.833" ry="1.8" paint-order="stroke fill markers"/><rect ry="1.8" y="94.833" x="146.776" height="15.098" width="15.098" id="rect1705" paint-order="stroke fill markers"/></g><g transform="translate(4.812 90.302) scale(.25743)" id="g3345"><g id="g2508" transform="translate(-113.637 -2.076)"><path d="M324.186 147.222H175.819c-13.78 0-24.946 11.171-24.946 24.94 0 13.78 11.166 24.951 24.946 24.951h148.367c13.774 0 24.951-11.171 24.951-24.951.001-13.769-11.176-24.94-24.951-24.94zm-3.282 33.474a8.535 8.535 0 0 1-8.534-8.534c0-4.71 3.824-8.529 8.534-8.529a8.53 8.53 0 0 1 8.533 8.529 8.53 8.53 0 0 1-8.533 8.534z" id="path2502"/><path d="M324.186 202.696H175.819c-13.78 0-24.946 11.165-24.946 24.946 0 13.781 11.166 24.946 24.946 24.946h148.367c13.774 0 24.951-11.165 24.951-24.946 0-13.781-11.176-24.946-24.951-24.946zm-3.282 33.486c-4.71 0-8.534-3.83-8.534-8.54 0-4.71 3.824-8.534 8.534-8.534 4.714 0 8.533 3.825 8.533 8.534 0 4.709-3.819 8.54-8.533 8.54z" id="path2504"/><path d="M324.186 258.171H175.819c-13.78 0-24.946 11.165-24.946 24.945 0 13.78 11.166 24.951 24.946 24.951h148.367c13.774 0 24.951-11.171 24.951-24.951 0-13.78-11.176-24.945-24.951-24.945zm-3.282 33.474c-4.71 0-8.534-3.813-8.534-8.528a8.535 8.535 0 0 1 8.534-8.534 8.531 8.531 0 0 1 8.533 8.534c.001 4.714-3.819 8.528-8.533 8.528z" id="path2506"/></g><g id="g2514" transform="translate(-113.638 -2.076)" fill="#ff931e"><path d="M207.769 333.724h84.473v19.054h-84.473z" id="rect2510"/><path d="M244.282 314.03h11.437v28.58h-11.437z" id="rect2512"/></g><g id="g2520" transform="translate(-113.632 -2.076)" fill="#ff931e"><path d="M134.814 339.681h67.719v6.288h-67.719z" id="rect2516"/><path d="M297.472 339.681h67.714v6.288h-67.714z" id="rect2518"/></g></g><g id="g1835" class="cv-view hidden"><path d="M73.617 138.487h22.114v31.276H73.617z" id="rect3128" fill="#fffdfd" stroke-width=".544" stroke-linejoin="bevel" paint-order="stroke fill markers"/><path d="M74.721 139.451h3.423v3.422H74.72z" id="rect3132" fill="#5f5b5b" stroke-width=".544" stroke-linejoin="bevel" paint-order="stroke fill markers"/><path d="M73.54 144.118h22.244v1.244H73.54z" id="rect3134" fill="#2b90e1" stroke-width=".544" stroke-linejoin="bevel" paint-order="stroke fill markers"/><path d="M79.575 140.104h8.323v.934h-8.323z" id="rect3136" fill="#e1872b" stroke-width=".544" stroke-linejoin="bevel" paint-order="stroke fill markers"/><path d="M79.575 142.104h11.667v.598H79.575z" id="rect3138" fill="#e1942b" stroke-width=".419" stroke-linejoin="bevel" paint-order="stroke fill markers"/><path d="M74.2 146.197h4.868v4.345H74.2z" id="rect3140" fill="#c4c4c4" stroke-width=".544" stroke-linejoin="bevel" paint-order="stroke fill markers"/><path d="M79.812 146.142h8.195v11.027h-8.195z" id="rect3142" fill="#c4c4c4" stroke-width=".544" stroke-linejoin="bevel" paint-order="stroke fill markers"/><path d="M88.75 146.197h6.517v8.25H88.75z" id="rect3144" fill="#c4c4c4" stroke-width=".544" stroke-linejoin="bevel" paint-order="stroke fill markers"/><rect ry=".129" y="146.356" x="77.863" height="1.083" width="1.083" id="rect1721-3" class="button hidden" fill="#0095ff"/><rect id="rect1785" width="1.083" height="1.083" x="76.707" y="146.356" ry=".129" class="button hidden" fill="#0095ff"/><rect ry=".129" y="146.356" x="75.552" height="1.083" width="1.083" id="rect1787" class="button hidden" fill="#0095ff"/><rect id="rect1789" width="1.083" height="1.083" x="86.762" y="146.246" ry=".129" class="button hidden" fill="#0095ff"/><rect ry=".129" y="146.246" x="85.607" height="1.083" width="1.083" id="rect1791" class="button hidden" fill="#0095ff"/><rect id="rect1793" width="1.083" height="1.083" x="84.451" y="146.246" ry=".129" class="button hidden" fill="#0095ff"/><rect ry=".129" y="146.246" x="94.062" height="1.083" width="1.083" id="rect1795" class="button hidden" fill="#0095ff"/><rect id="rect1797" width="1.083" height="1.083" x="92.907" y="146.246" ry=".129" class="button hidden" fill="#0095ff"/><rect ry=".129" y="146.246" x="91.751" height="1.083" width="1.083" id="rect1799" class="button hidden" fill="#0095ff"/></g></g></svg>

---
class: middle

# Première itération 👍

---
name: me
class: center, middle, naked
![thomas belin](//www.gravatar.com/avatar/56f2389bd912f388cc79874ce65fc0dc?s=150)  
Thomas Belin  
Front-end developer @ doyoubuzz  
<i class="ion-social-twitter"></i>
[@atomrc](https://twitter.com/atomrc) | [thomasbelin.fr](//blog.thomasbelin.fr)

---
class: middle

# Merci
### Do not fear the migration!

    </vnode></vnode></message></textarea><script src="https://remarkjs.com/downloads/remark-latest.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenMax.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TimelineMax.min.js"></script><script>function once(initFn) {
        var output = null;
        return function init(slide) {
          if (output) {
            return output;
          }
          output = initFn(slide);
          return output;
        };
      }

      var animations = {
        ngrender: once(function init(slide) {
          var timeline = new TimelineMax();
          var cvViewTl = new TimelineMax();
          var cvTemplateTl = new TimelineMax();
          var cvElementsTl = new TimelineMax();

          var cvView = slide.querySelector("#cv-view");
          var cvTemplate = slide.querySelector("#cv-template");

          var cvElements = slide.querySelector("#cv-elements");
          var cvElement = slide.querySelectorAll(".cv-element");

          var angular = slide.querySelector("#angular");

          var avatar = slide.querySelector("#avatar");
          var title = slide.querySelector("#head-title");
          var subtitle = slide.querySelector("#head-subtitle");
          var contentLeft = slide.querySelector("#content-left");
          var contentMiddle = slide.querySelector("#content-middle");
          var contentRight = slide.querySelector("#content-right");

          cvViewTl
            .to(cvView, 2, {
              opacity: 1,
              scale: 5,
              x: 650,
              transformOrigin: "center center",
            })
            .add("hide", "+=1")
            .to(cvView, 1, { opacity: 0 }, "hide");

          cvTemplateTl
            .to(cvTemplate, 2, {
              opacity: 1,
              scale: 5,
              x: 650,
              transformOrigin: "center center",
            })
            .add("load-elements")
            .to(cvElements, 1, {
              opacity: 1,
              scale: 5,
              x: 950,
              y: -85,
              transformOrigin: "center center",
            })
            .to(avatar, 1.5, { x: 40, y: 10 }, "load-elements")
            .to(title, 1.5, { x: -50, y: -20 }, "load-elements")
            .to(subtitle, 1.5, { x: -150, y: -10 }, "load-elements")
            .to(contentLeft, 1.5, { x: 50, y: -20 }, "load-elements")
            .to(contentMiddle, 1.5, { x: -120, y: 10 }, "load-elements")
            .to(contentRight, 1.5, { x: 30, y: 10 }, "load-elements")
            .to(angular, 0.1, { opacity: 1 })
            .to(angular, 1, { rotation: 720, transformOrigin: "center center" })
            .to(angular, 0.1, { opacity: 0 })
            .staggerTo(cvElement, 0.5, { x: -60, y: 0 }, 0.2)
            .add("hide", "+=1")
            .to(cvElements, 1, { opacity: 0 }, "hide")
            .to(cvTemplate, 1, { opacity: 0 }, "hide");

          timeline
            .to(slide.querySelector(".view-mode"), 0.5, { opacity: 1 })
            .add(cvViewTl)
            .to(slide.querySelector(".view-mode"), 0.5, { opacity: 0 })
            .to(slide.querySelector(".edit-mode"), 0.5, { opacity: 1 })
            .add(cvTemplateTl)
            .to(slide.querySelector(".edit-mode"), 0.5, { opacity: 0 })
            .repeat(-1);

          return timeline;
        }),

        rendering: once(function init(slide) {
          var timeline = new TimelineMax();
          var htmlTimeline = new TimelineMax();
          var vnode1Tl = new TimelineMax();
          var vnode2Tl = new TimelineMax();
          var elementsTl = new TimelineMax();
          var finalVnodeTl = new TimelineMax();

          var htmlstring = slide.querySelectorAll("#htmlstring");
          var vnode1 = slide.querySelector("#vnode-1");
          var vnode2 = slide.querySelector("#vnode-2");
          var elements = slide.querySelector("#elements");
          var finalVnode = slide.querySelector("#final-vnode");

          htmlTimeline.to(htmlstring, 2, { x: 90, ease: Power0.easeNone });

          vnode1Tl
            .to(vnode1, 1.5, { y: -68, ease: Power0.easeNone })
            .to(vnode1, 1.5, { x: 75, ease: Power0.easeNone });

          vnode2Tl.to(vnode2, 3, { x: 220, ease: Power0.easeNone });

          elementsTl
            .to(elements, 1.5, { x: 130, ease: Power0.easeNone })
            .to(elements, 1.5, { y: 110, ease: Power0.easeNone });

          finalVnodeTl.to(finalVnode, 2, { x: 150, ease: Power0.easeNone });

          timeline
            .add(htmlTimeline)
            .add(vnode1Tl)
            .add("combine")
            .add(vnode2Tl, "combine")
            .add(elementsTl, "combine")
            .add(finalVnodeTl)
            .repeat(-1);

          return timeline;
        }),

        cyclerender: once(function init(slide) {
          var timeline = new TimelineMax();
          var cvViewTl = new TimelineMax();

          var cvView = slide.querySelector(".cv-view");
          var buttons = slide.querySelectorAll(".buttons");
          var button = slide.querySelectorAll(".button");

          cvViewTl
            .to(cvView, 0.3, { opacity: 1 })
            .to(cvView, 1, {
              scale: 5,
              x: 75,
              transformOrigin: "center center",
            })
            .add("move")
            .to(buttons, 0, { opacity: 1 })
            .to(cvView, 3, { x: 175 }, "move")
            .staggerTo(
              buttons,
              2,
              { y: "-=80", ease: Elastic.easeOut.config(1, 0.3) },
              0.2,
              "move"
            )
            .to(buttons, 3, { x: 100 }, "move")
            .to(button, 0, { scale: 0.1, transformOrigin: "center center" })
            .staggerTo(buttons, 1, { y: 80, ease: Power1.easeIn }, 0.2)
            .to(button, 0, { opacity: 1 })
            .staggerTo(
              button,
              1,
              {
                scale: 1,
                transformOrigin: "center center",
                ease: Elastic.easeOut.config(1.5, 0.3),
              },
              0.1
            );

          timeline.add(cvViewTl).repeat(-1);

          return timeline;
        }),
      };</script><script>//init remarkjs
      var timeout = window.setTimeout;
      var slideshow = remark.create({
        highlightStyle: "github",
        highlightLines: true,
        ratio: "16:9",
      });

      slideshow.on("beforeHideSlide", function (slide) {
        var currentSlide = document.querySelector(
          ".remark-slide-container.entered"
        );
        var animation = animations[slide.properties.name]
          ? animations[slide.properties.name](currentSlide)
          : null;
        if (animation) {
          animation.pause();
        }
        if (!currentSlide) {
          return;
        }
        currentSlide.classList.remove("entered");
      });

      slideshow.on("afterShowSlide", function (slide) {
        timeout(launchAnimations, 50, slide);
      });

      timeout(
        launchAnimations,
        50,
        slideshow.getSlides()[slideshow.getCurrentSlideIndex()]
      );

      function launchAnimations(slide) {
        var element = document.querySelector(".remark-visible");
        element.classList.add("entered");
        var animation = animations[slide.properties.name]
          ? animations[slide.properties.name](element)
          : null;
        if (animation) {
          animation.play();
        }
        return animation;
      }

      document.addEventListener("keyup", function (ev) {
        switch (ev.keyCode) {
          case 84:
            var currentSlide = document.querySelector(
              ".remark-slide-container.entered"
            );
            currentSlide.classList.toggle("toggled");
            break;

          case 82:
            var currentSlide = document.querySelector(
              ".remark-slide-container.entered"
            );
            currentSlide.classList.toggle("sub-toggled");
            break;
        }
      });</script><script>(function (i, s, o, g, r, a, m) {
        i["GoogleAnalyticsObject"] = r;
        (i[r] =
          i[r] ||
          function () {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(
        window,
        document,
        "script",
        "//www.google-analytics.com/analytics.js",
        "ga"
      );
      ga("create", "UA-34218773-1", { siteSpeedSampleRate: 100 });
      ga("send", "pageview");</script></body></html>